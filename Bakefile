#!/bin/bash

serve() {
  .venv/bin/python app.py
}

deploy() {
  git push
  ssh pya "chmod +x /home/gijs3/gijs6.nl/deploy.sh && /home/gijs3/gijs6.nl/deploy.sh"
}

deploy_rsync() {
  rsync -avz --exclude='.git' --exclude='__pycache__' --exclude='.venv' --exclude='.env' . pya:/home/gijs3/gijs6.nl/
  ssh pya "touch /var/www/www_gijs6_nl_wsgi.py"
}

force_deploy() {
  deploy
  source .env
  curl -X POST "https://eu.pythonanywhere.com/api/v0/user/gijs3/webapps/www.gijs6.nl/reload/" -H "Authorization: Token $API_TOKEN"
}

format() {
  ruff format .
  prettier --write "**/*.{css,js}"
  prettier --write "**/*.json"
  djlint . --reformat
  markdownlint --fix "**/*.md" || true
}
